{"version":3,"sources":["webpack:///./app/components/circleIndicator.jsx","webpack:////usr/src/sentry/node_modules/lodash/groupBy.js","webpack:///./app/views/organizationIntegrations/addIntegration.jsx","webpack:////usr/src/sentry/node_modules/lodash/compact.js","webpack:///./app/views/organizationIntegrations/addIntegrationButton.jsx","webpack:///./app/components/confirmDelete.jsx","webpack:///./app/components/avatar/sentryAppAvatar.jsx","webpack:///./app/views/settings/organizationDeveloperSettings/sentryApplicationRow.jsx","webpack:///./app/views/organizationIntegrations/migrationWarnings.jsx","webpack:///./app/views/organizationIntegrations/installedIntegration.jsx","webpack:///./app/views/organizationIntegrations/providerRow.jsx","webpack:///./app/views/organizationIntegrations/sentryAppInstallations.jsx","webpack:///./app/actionCreators/sentryAppInstallations.jsx","webpack:///./app/views/organizationIntegrations/index.jsx"],"names":["getBackgroundColor","p","color","concat","enabled","theme","success","error","getSize","size","Circle","styled","target","CircleIndicator","props","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","call","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","React","Component","propTypes","PropTypes","bool","isRequired","number","string","defaultProps","baseAssignValue","__webpack_require__","createAggregator","hasOwnProperty","Object","prototype","groupBy","result","value","key","push","module","exports","AddIntegration","openDialog","urlParams","_this$props$provider$","_this","provider","setupDialog","url","width","height","_this$computeCentered","computeCenteredWindow","left","top","query","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","reinstallId","reinstall_id","installUrl","queryString","stringify","opts","dialog","window","open","focus","didReceiveMessage","message","origin","document","location","source","_message$data","data","onInstall","IndicatorStore","addSuccess","t","name","addError","addEventListener","removeEventListener","close","screenLeft","undefined","screen","screenTop","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","children","func","object","array","index","length","resIndex","AddIntegrationButton","_this$props","buttonText","onAddIntegration","reinstall","buttonProps","_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default","label","metadata","noun","react__WEBPACK_IMPORTED_MODULE_8___default","app_components_tooltip__WEBPACK_IMPORTED_MODULE_12__","disabled","canAdd","title","app_views_organizationIntegrations_addIntegration__WEBPACK_IMPORTED_MODULE_10__","onClick","app_components_button__WEBPACK_IMPORTED_MODULE_11__","_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default","ConfirmDelete","_getPrototypeOf2","classCallCheck_default","_len","arguments","args","Array","_key","possibleConstructorReturn_default","getPrototypeOf_default","apply","handleChange","evt","input","confirmInput","setState","disableConfirmButton","state","objectWithoutProperties_default","react_default","components_confirm","extends_default","bypass","Fragment","components_alert","type","field","flexibleControlStateSize","inline","placeholder","onChange","PureComponent","onConfirm","confirmText","cancelText","priority","oneOf","node","renderMessage","onConfirming","onCancel","SentryAppAvatar","sentryApp","baseAvatar","uploadPath","uploadId","letterId","uuid","tooltip","SentryTypes","SentryApplication","BaseAvatar","SentryApplicationRow","app","slug","confirmDelete","onRemoveApp","components_button","icon","install","_this2","onUninstall","StyledButton","borderless","data-test-id","_this3","orgId","installs","showPublishStatus","isInstalled","SentryAppItem","StyledFlex","sentryAppAvatar","SentryAppBox","SentryAppName","SentryAppLink","to","SentryAppDetails","PublishStatus","published","status","Status","StyledLink","index_es","access","_ref","hasAccess","renderRemoveApp","renderUninstall","className","PanelItem","Flex","Box","Link","gray2","textColor","Button","withTheme","_ref2","align","circleIndicator","space","gray1","_ref3","MigrationWarnings","entries","unmigratableReposByOrg","map","slicedToArray_default","orgName","repos","id","providers","find","addIntegration","alertLink","href","tct","providerName","groupBy_default","unmigratableRepos","repo","split","AsyncComponent","CONFIGURABLE_FEATURES","InstalledIntegration","reinstallIntegration","integration","activeIntegration","assign","onReinstallIntegration","configOrganization","features","filter","f","includes","aspects","removal_dialog","body","actionText","_this$props2","removeConfirmProps","canDisable","disableConfirmProps","flex","integrationItem","compact","addIntegrationButton","hasConfiguration","tooltipOptions","placement","_this$getRemovalBodyA","getRemovalBodyAndText","onRemove","_this4","_integration$provider","disable_dialog","onDisable","ProviderRow","openModal","organization","context","openIntegrationDetails","integrations","StyledInstalledIntegration","onReinstall","panels","direction","pluginIcon","pluginId","px","ProviderName","ProviderDetails","isEnabled","renderIntegrations","enabledPlugins","upgradableIntegrations","upgradeable","isEnabledPlugin","isUpgradable","contextTypes","Organization","NewInstallation","growDown","highlight","yellowLightest","newlyAdded","installedIntegration_InstalledIntegration","borderLight","SentryAppInstallations","redirectUser","redirectUrl","queryParams","installationId","code","orgSlug","addQueryParamsToExistingUrl","addSuccessMessage","toConsumableArray_default","client","addLoadingMessage","promise","requestPromise","method","then","clearIndicators","addErrorMessage","installSentryApp","api","objectSpread_default","uninstall","origInstalls","i","uninstallSentryApp","openSentryAppPermissionModal","applications","isEmpty","sentryApplicationRow","installsByApp","withApi","OrganizationIntegrations","shouldReload","reloadOnVisible","shouldReloadOnVisible","keyedItems","keyBy_default","sortArray","values","defineProperty_default","params","origIntegrations","options","request","_integration$domainNa","domainName","_integration$domainNa2","accountType","analytics","org_id","parseInt","endpoints","plugins","_this$state","reloading","appInstalls","sort","b","providerRow_ProviderRow","hideHeader","settingsPageHeader","permissionAlert","migrationWarnings_MigrationWarnings","disablePadding","StyledLoadingIndicator","mini","sentryAppInstallations","compact_default","plugin","config","LoadingIndicator","withOrganization"],"mappings":"uNAIMA,EAAqB,SAAAC,GACzB,OAAIA,EAAEC,MACJ,eAAAC,OAAsBF,EAAEC,MAAxB,KAGF,eAAAC,OAAsBF,EAAEG,QAAUH,EAAEI,MAAMC,QAAUL,EAAEI,MAAME,MAA5D,MAGIC,EAAU,SAAAP,GAAC,qBAAAE,OACLF,EAAEQ,KADG,kBAAAN,OAENF,EAAEQ,KAFI,UAKXC,EAASC,kBAAH,OAAAC,OAAA,YAAGD,CAAH,4DAIRH,EAJQ,IAKRR,EALQ,KAQNa,cAYJ,SAAAA,EAAYC,GAAO,OAAAC,IAAAC,KAAAH,GAAAI,IAAAD,KAAAE,IAAAL,GAAAM,KAAAH,KACXF,0DAIN,OAAOM,EAAAC,EAAAC,cAACZ,EAAWM,KAAKF,cAjBES,IAAMC,WAA9BX,EACGY,UAAY,CACjBrB,QAASsB,IAAUC,KAAKC,WACxBnB,KAAMiB,IAAUG,OAAOD,WACvB1B,MAAOwB,IAAUI,QAJfjB,EAOGkB,aAAe,CACpB3B,SAAS,EACTK,KAAM,IAYKI,4BC9Cf,IAAAmB,EAAsBC,EAAQ,KAC9BC,EAAuBD,EAAQ,KAM/BE,EAHAC,OAAAC,UAGAF,eAyBAG,EAAAJ,EAAA,SAAAK,EAAAC,EAAAC,GACAN,EAAAhB,KAAAoB,EAAAE,GACAF,EAAAE,GAAAC,KAAAF,GAEAR,EAAAO,EAAAE,EAAA,CAAAD,MAIAG,EAAAC,QAAAN,0OCjCqBO,qLAyCnBC,WAAa,SAAAC,GACX,IADwBC,EAEKC,EAAKnC,MAAMoC,SAASC,YAA1CC,EAFiBJ,EAEjBI,IAAKC,EAFYL,EAEZK,MAAOC,EAFKN,EAELM,OAFKC,EAGJN,EAAKO,sBAAsBH,EAAOC,GAA/CG,EAHiBF,EAGjBE,KAAMC,EAHWH,EAGXG,IAEPC,EAAQC,IAAA,GAAIb,GAEdE,EAAKnC,MAAM+C,cACbF,EAAMG,aAAeb,EAAKnC,MAAM+C,aAGlC,IAAME,EAAU,GAAA5D,OAAMiD,EAAN,KAAAjD,OAAa6D,IAAYC,UAAUN,IAC7CO,EAAI,wBAAA/D,OAA2BkD,EAA3B,YAAAlD,OAA2CmD,EAA3C,SAAAnD,OAAyDuD,EAAzD,UAAAvD,OAAqEsD,GAE/ER,EAAKkB,OAASC,OAAOC,KAAKN,EAbb,uBAa+BG,GAC5CjB,EAAKkB,OAAOG,WAGdC,kBAAoB,SAAAC,GAClB,GAAIA,EAAQC,SAAWC,SAASC,SAASF,QAIrCD,EAAQI,SAAW3B,EAAKkB,OAA5B,CAL6B,IAAAU,EASLL,EAAQM,KAAzBxE,EATsBuE,EAStBvE,QAASwE,EATaD,EASbC,KAChB7B,EAAKkB,OAAS,KAET7D,EAKAwE,IAIL7B,EAAKnC,MAAMiE,UAAUD,GACrBE,UAAeC,WAAWC,YAAC,GAAA/E,OAAI8C,EAAKnC,MAAMoC,SAASiC,KAAxB,aATzBH,UAAeI,SAASN,EAAKvE,4EA/D/BS,KAAKmD,OAAS,KACdC,OAAOiB,iBAAiB,UAAWrE,KAAKuD,kEAIxCH,OAAOkB,oBAAoB,UAAWtE,KAAKuD,mBAC3CvD,KAAKmD,QAAUnD,KAAKmD,OAAOoB,sDAGPlC,EAAOC,GAC3B,IAAMkC,EAAkCC,MAArBrB,OAAOoB,WAA0BpB,OAAOoB,WAAaE,OAAOjC,KAEzEkC,EAAgCF,MAApBrB,OAAOuB,UAAyBvB,OAAOuB,UAAYD,OAAOhC,IAiB5E,MAAO,CAACD,MAfWW,OAAOwB,WACtBxB,OAAOwB,WACPlB,SAASmB,gBAAgBC,YACvBpB,SAASmB,gBAAgBC,YACzBJ,OAAOrC,OAQa,EAAIA,EAAQ,EAAImC,EAG5B9B,KATMU,OAAO2B,YACvB3B,OAAO2B,YACPrB,SAASmB,gBAAgBG,aACvBtB,SAASmB,gBAAgBG,aACzBN,OAAOpC,QAGa,EAAIA,EAAS,EAAIqC,oCAiD3C,OAAO3E,KAAKF,MAAMmF,SAASjF,KAAK8B,mBArFQvB,IAAMC,WAA7BqB,EACZpB,UAAY,CACjBwE,SAAUvE,IAAUwE,KAAKtE,WACzBsB,SAAUxB,IAAUyE,OAAOvE,WAC3BmD,UAAWrD,IAAUwE,KAAKtE,WAC1BiC,YAAanC,IAAUI,4BCkB3Ba,EAAAC,QAfA,SAAAwD,GAMA,IALA,IAAAC,GAAA,EACAC,EAAA,MAAAF,EAAA,EAAAA,EAAAE,OACAC,EAAA,EACAhE,EAAA,KAEA8D,EAAAC,GAAA,CACA,IAAA9D,EAAA4D,EAAAC,GACA7D,IACAD,EAAAgE,KAAA/D,GAGA,OAAAD,6PCnBqBiE,2IAQV,IAAAC,EAOHzF,KAAKF,MALPoC,EAFKuD,EAELvD,SACAwD,EAHKD,EAGLC,WACAC,EAJKF,EAILE,iBACAC,EALKH,EAKLG,UACGC,EANEC,IAAAL,EAAA,0DASDM,EACJL,GAAcxB,YAAE0B,EAAY,SAAW,SAAU1D,EAAS8D,SAASC,MAErE,OACEC,EAAA7F,EAAAC,cAAC6F,EAAA,QAAD,CACEC,SAAUlE,EAASmE,OACnBC,MAAK,0EAAAnH,OAA4E+C,EAASiC,KAArF,eAEL+B,EAAA7F,EAAAC,cAACiG,EAAA,EAAD,CAAgBrE,SAAUA,EAAU6B,UAAW4B,GAC5C,SAAAa,GAAO,OACNN,EAAA7F,EAAAC,cAACmG,EAAA,QAADC,IAAA,CACEN,UAAWlE,EAASmE,QAChBR,EAFN,CAGEW,QAAS,kBAAMA,OAEdT,aAhCmCxF,IAAMC,WAAnCgF,EACZ/E,UAAY,CACjByB,SAAUxB,IAAUyE,OAAOvE,WAC3B+E,iBAAkBjF,IAAUwE,KAAKtE,WACjC8E,WAAYhF,IAAUI,OACtB8E,UAAWlF,IAAUC,yQCLnBgG,cAyBJ,SAAAA,IAAqB,IAAAC,EAAA3E,EAAA4E,IAAA7G,KAAA2G,GAAA,QAAAG,EAAAC,UAAAzB,OAAN0B,EAAM,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAANF,EAAME,GAAAH,UAAAG,GAAA,OACnBjF,EAAAkF,IAAAnH,MAAA4G,EAAAQ,IAAAT,IAAAxG,KAAAkH,MAAAT,EAAA,CAAA5G,MAAAb,OAAS6H,MAQXM,aAAe,SAAAC,GACb,IAAMC,EAAQD,EAAI3H,OAAO4B,MACrBgG,IAAUvF,EAAKnC,MAAM2H,aACvBxF,EAAKyF,SAAS,CAACC,sBAAsB,EAAOF,aAAcD,IAE1DvF,EAAKyF,SAAS,CAACC,sBAAsB,EAAMF,aAAcD,KAX3DvF,EAAK2F,MAAQ,CACXD,sBAAsB,EACtBF,aAAc,IALGxF,wDAkBZ,IAAAwD,EACmCzF,KAAKF,MAAxC2H,EADAhC,EACAgC,aAAcjE,EADdiC,EACcjC,QAAY1D,EAD1B+H,IAAApC,EAAA,4BAEAkC,EAAwB3H,KAAK4H,MAA7BD,qBAEP,OACEG,EAAAzH,EAAAC,cAACyH,EAAA,QAADC,IAAA,GACMlI,EADN,CAEEmI,QAAQ,EACRN,qBAAsBA,EACtBnE,QACEsE,EAAAzH,EAAAC,cAACwH,EAAAzH,EAAM6H,SAAP,KACEJ,EAAAzH,EAAAC,cAAC6H,EAAA,QAAD,CAAOC,KAAK,SAAS5E,GACrBsE,EAAAzH,EAAAC,cAAC+H,EAAA,QAAD,CACEpJ,EAAG,EACHqJ,0BAA0B,EAC1BC,QAAQ,EACRxC,MACE+B,EAAAzH,EAAAC,cAAA,2BACewH,EAAAzH,EAAAC,cAAA,YAAOmH,GADtB,6BAKFK,EAAAzH,EAAAC,cAACkH,EAAA,EAAD,CACEY,KAAK,OACLI,YAAaf,EACbgB,SAAUzI,KAAKsH,aACf9F,MAAOxB,KAAK4H,MAAMH,2BArENlH,IAAMmI,eAA5B/B,EACGlG,UAAY,CACjBkI,UAAWjI,IAAUwE,KAAKtE,WAC1BgI,YAAalI,IAAUI,OAAOF,WAC9B6G,aAAc/G,IAAUI,OAAOF,WAC/BiI,WAAYnI,IAAUI,OAAOF,WAC7BkI,SAAUpI,IAAUqI,MAAM,CAAC,UAAW,WAAWnI,WACjD4C,QAAS9C,IAAUsI,KAMnBC,cAAevI,IAAUwE,KACzBkB,SAAU1F,IAAUC,KACpBuI,aAAcxI,IAAUwE,KACxBiE,SAAUzI,IAAUwE,MAhBlByB,EAmBG5F,aAAe,CACpB+H,SAAU,UACVD,WAAY3E,YAAE,UACd0E,YAAa1E,YAAE,YAyDJyC,yCClFTyC,2IAMK,IAAA3D,EACuBzF,KAAKF,MAA5BuJ,EADA5D,EACA4D,UAAcvJ,EADd+H,IAAApC,EAAA,eAEP,OAAK4D,EAKHvB,EAAAzH,EAAAC,cAACgJ,EAAA,EAADtB,IAAA,GACMlI,EADN,CAEEsI,KAAM,gBACNmB,WAAW,SACXC,SAAU,GACVC,SAAUJ,EAAUK,KACpBC,QAASN,EAAUlF,KACnBmC,MAAO+C,EAAUlF,QAXZ,YATiB5D,IAAMC,WAA9B4I,EACG3I,eACL4I,UAAWO,UAAYC,kBAAkBjJ,YACtCkJ,IAAWrJ,WAsBH2I,8FCZMW,kJAeHC,GAAK,IAAA/H,EAAAjC,KACbwD,EAAUU,YAAC,YAAA/E,OACH6K,EAAIC,KADD,oHAIjB,OACEnC,EAAAzH,EAAAC,cAAC4J,EAAD,CACE1G,QAASA,EACTiE,aAAcuC,EAAIC,KAClBnB,SAAS,SACTH,UAAW,kBAAM1G,EAAKnC,MAAMqK,YAAYH,KAExClC,EAAAzH,EAAAC,cAAC8J,EAAA,QAAD,CAAQ3K,KAAK,QAAQ4K,KAAK,wDAKhBC,GAAS,IAAAC,EAAAvK,KACjBwD,EAAUU,YAAC,uCAAA/E,OACwBmL,EAAQN,IAAIC,KADpC,oBAGjB,OACEnC,EAAAzH,EAAAC,cAACyH,EAAA,QAAD,CACEvE,QAASA,EACTsF,SAAS,SACTH,UAAW,kBAAM4B,EAAKzK,MAAM0K,YAAYF,KAExCxC,EAAAzH,EAAAC,cAACmK,EAAD,CAAcC,YAAU,EAACL,KAAK,aAAaM,eAAa,wBACrDzG,YAAE,6CAMF,IAAA0G,EAAA5K,KAAAyF,EAC2CzF,KAAKF,MAAhDkK,EADAvE,EACAuE,IAAKa,EADLpF,EACKoF,MAAOC,EADZrF,EACYqF,SAAUC,EADtBtF,EACsBsF,kBACvBC,EAAcF,GAAYA,EAASxF,OAAS,EAElD,OACEwC,EAAAzH,EAAAC,cAAC2K,EAAD,KACEnD,EAAAzH,EAAAC,cAAC4K,EAAD,KACEpD,EAAAzH,EAAAC,cAAC6K,EAAD,CAAiB1L,KAAM,GAAI4J,UAAWW,IACtClC,EAAAzH,EAAAC,cAAC8K,EAAD,KACEtD,EAAAzH,EAAAC,cAAC+K,EAAD,KACGN,EACCjD,EAAAzH,EAAAC,cAACgL,EAAD,CAAeC,GAAE,aAAApM,OAAe0L,EAAf,wBAAA1L,OAA2C6K,EAAIC,KAA/C,MACdD,EAAI7F,MAGP6F,EAAI7F,MAGR2D,EAAAzH,EAAAC,cAACkL,EAAD,KACGT,EACCjD,EAAAzH,EAAAC,cAACmL,GAAD,CAAeC,UAA0B,cAAf1B,EAAI2B,SAE9B7D,EAAAzH,EAAAC,cAACwH,EAAAzH,EAAM6H,SAAP,KACEJ,EAAAzH,EAAAC,cAACsL,EAAD,CAAQxM,QAAS4L,IACjBlD,EAAAzH,EAAAC,cAACuL,EAAD,CAAYrF,QAAS,cAAWtC,YAAE,kBAKxC6G,EAgBAjD,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,KACkB,gBAAf9B,EAAI2B,OACH7D,EAAAzH,EAAAC,cAACyL,EAAA,EAAD,CAAQA,OAAQ,CAAC,cACd,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,UAAF,OACCnE,EAAAzH,EAAAC,cAACwH,EAAAzH,EAAM6H,SAAP,MACI+D,GACAnE,EAAAzH,EAAAC,cAACqJ,EAAA,QAAD,CACErD,MAAOpC,YAAE,oDAET4D,EAAAzH,EAAAC,cAAC8J,EAAA,QAAD,CAAQhE,UAAQ,EAAC3G,KAAK,QAAQ4K,KAAK,gBAGtC4B,GAAarB,EAAKsB,gBAAgBlC,MAKzClC,EAAAzH,EAAAC,cAACqJ,EAAA,QAAD,CAASrD,MAAOpC,YAAE,sCAChB4D,EAAAzH,EAAAC,cAAC8J,EAAA,QAAD,CAAQhE,UAAQ,EAAC3G,KAAK,QAAQ4K,KAAK,iBAjCzCvC,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,KACId,EAUAhL,KAAKmM,gBAAgBrB,EAAS,IAT9BhD,EAAAzH,EAAAC,cAAC8J,EAAA,QAAD,CACE5D,QAAS,kBAAMoE,EAAK9K,MAAMiE,UAAUiG,IACpCvK,KAAK,QACL4K,KAAK,kBACL+B,UAAU,mBAETlI,YAAE,sBAvF6B3D,IAAMmI,eAAnCqB,EACZtJ,UAAY,CACjBuJ,IAAKJ,UAAYC,kBACjBgB,MAAOnK,IAAUI,OAAOF,WACxBkK,SAAUpK,IAAU0E,MACpBrB,UAAWrD,IAAUwE,KACrBsF,YAAa9J,IAAUwE,KACvBiF,YAAazJ,IAAUwE,KACvB6F,kBAAmBrK,IAAUC,MARZoJ,EAWZhJ,aAAe,CACpBgK,mBAAmB,GA+GvB,IAAME,EAAgBtL,kBAAO0M,IAAV,CAAAzM,OAAA,YAAGD,CAAH,sCAKbuL,EAAavL,kBAAO2M,OAAV,CAAA1M,OAAA,YAAGD,CAAH,wCAKVyL,EAAezL,kBAAO4M,MAAV,CAAA3M,OAAA,YAAGD,CAAH,gDAMZ6L,EAAmB7L,kBAAO2M,OAAV,CAAA1M,OAAA,YAAGD,CAAH,sDAMhB0L,EAAgB1L,kBAAO,MAAV,CAAAC,OAAA,YAAGD,CAAH,qBAIbkM,EAAalM,kBAAO6M,OAAV,CAAA5M,OAAA,YAAGD,CAAH,SACL,SAAAV,GAAC,OAAIA,EAAEI,MAAMoN,OADR,KAIVnB,EAAgB3L,kBAAO6M,OAAV,CAAA5M,OAAA,YAAGD,CAAH,SACR,SAAAG,GAAK,OAAIA,EAAMT,MAAMqN,WADb,KAIbjC,EAAe9K,kBAAOgN,UAAV,CAAA/M,OAAA,YAAGD,CAAH,SACP,SAAAV,GAAC,OAAIA,EAAEI,MAAMoN,OADN,KAIZb,EAASjM,kBACbiN,oBAAU,SAAAC,GAAyB,IAAvBzN,EAAuByN,EAAvBzN,QAAYU,EAAW+H,IAAAgF,EAAA,aACjC,OACE/E,EAAAzH,EAAAC,cAACwL,EAAA,KAAD,CAAMgB,MAAM,UACVhF,EAAAzH,EAAAC,cAACyM,EAAA,EAAD,CACEtN,KAAM,EACNP,MAAOE,EAAUU,EAAMT,MAAMC,QAAUQ,EAAMT,MAAMoN,QAErD3E,EAAAzH,EAAAC,cAAA,MAASR,EAAQV,EAAU8E,YAAE,aAAeA,YAAE,qBAR1C,CAAAtE,OAAA,YAAGD,CAAH,SAaD,SAAAG,GAAK,OAAKA,EAAMV,QAAUU,EAAMT,MAAMC,QAAUQ,EAAMT,MAAMoN,OAb3D,gBAcKO,kBAAM,IAdX,gDAkBC,SAAA/N,GAAC,OAAIA,EAAEI,MAAM4N,OAlBd,gBAmBOD,kBAAM,KAnBb,qCAsBMA,kBAAM,KAtBZ,KAyBNvB,GAAgB9L,kBAAO,SAAAuN,GAA2B,IAAzBxB,EAAyBwB,EAAzBxB,UAAc5L,EAAW+H,IAAAqF,EAAA,eACtD,OACEpF,EAAAzH,EAAAC,cAACwL,EAAA,KAAD,CAAMgB,MAAM,UACVhF,EAAAzH,EAAAC,cAAA,MAASR,EAAQ4L,EAAYxH,YAAE,aAAeA,YAAE,kBAHnC,CAAAtE,OAAA,YAAGD,CAAH,SAOR,SAAAG,GAAK,OAAKA,EAAM4L,UAAY5L,EAAMT,MAAMC,QAAUQ,EAAMT,MAAMoN,OAPtD,mCASDO,kBAAM,KATL,yXCnMEG,iJAOJ,IACNtC,EAAS7K,KAAKF,MAAd+K,MAEP,MAAO,CAAC,CAAC,oBAAD,kBAAA1L,OAAwC0L,EAAxC,kEAQD,IAAA5I,EAAAjC,KACP,OAAOoB,OAAOgM,QAAQpN,KAAKqN,wBAAwBC,IAAI,SAAAtB,GAAsB,IAAAa,EAAAU,IAAAvB,EAAA,GAApBwB,EAAoBX,EAAA,GAAXY,EAAWZ,EAAA,GAErEpL,EAA8B,gBAAxBgM,EAAM,GAAGvL,SAASwL,GAAuB,OAASD,EAAM,GAAGvL,SAASwL,GAC1ExL,EAAWD,EAAKnC,MAAM6N,UAAUC,KAAK,SAAA3O,GAAC,OAAIA,EAAEwC,MAAQA,IAG1D,OAAKS,EAKH4F,EAAAzH,EAAAC,cAACuN,EAAA,EAAD,CACEpM,IAAKS,EAAST,IACdS,SAAUA,EACV6B,UAAW9B,EAAKnC,MAAMiE,WAErB,SAAAyC,GAAO,OACNsB,EAAAzH,EAAAC,cAACwN,EAAA,EAAD,CAAWtH,QAAS,kBAAMA,KAAWuH,KAAK,KACvCC,cACC,8GACA,CACER,UACAS,aAAc/L,EAASiC,UAf1B,oDAXX,OAAO+J,IAAQlO,KAAK4H,MAAMuG,kBAAmB,SAAAC,GAAI,OAAIA,EAAKjK,KAAKkK,MAAM,KAAK,YAf/BC,WAA1BnB,EACZ1M,UAAY,CACjBoK,MAAOnK,IAAUI,OAAOF,WACxB+M,UAAWjN,IAAU0E,MAAMxE,WAC3BmD,UAAWrD,IAAUwE,KAAKtE,sJCCxB2N,GAAwB,CAAC,UAAW,cAErBC,sLA0BnBC,qBAAuB,SAAAC,GACrB,IAAMC,EAAoBvN,OAAOwN,OAAO,GAAI3M,EAAKnC,MAAM4O,YAAa,CAClE/C,OAAQ,WAEV1J,EAAKnC,MAAM+O,uBAAuBF,sEAbjB,IAAAlJ,EACezF,KAAKF,MAA9B4O,EADUjJ,EACViJ,YAAaxM,EADHuD,EACGvD,SAEpB,OACEwM,EAAYI,mBAAmBxJ,OAAS,GACxCpD,EAAS6M,SAASC,OAAO,SAAAC,GAAC,OAAIV,GAAsBW,SAASD,KAAI3J,OAAS,gDAWxD6J,GACpB,OAAIA,GAAWA,EAAQC,eACd,CACLC,KAAMF,EAAQC,eAAeC,KAC7BC,WAAYH,EAAQC,eAAeE,YAG9B,CACLD,KAAMnL,YACJ,sJAEFoL,WAAYpL,YAAE,4CA2CX,IAAAqG,EAAAvK,KAAAuP,EAC2CvP,KAAKF,MAAhDsM,EADAmD,EACAnD,UAAWsC,EADXa,EACWb,YAAaxM,EADxBqN,EACwBrN,SAAU2I,EADlC0E,EACkC1E,MAEnC2E,EACmB,WAAvBd,EAAY/C,QAAuB+C,EAAYxM,SAASuN,WACpDzP,KAAK0P,oBACL1P,KAAKwP,mBAEX,OACE1H,EAAAzH,EAAAC,cAACyL,EAAA,EAAD,CAAQA,OAAQ,CAAC,qBACd,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,UAAF,OACCnE,EAAAzH,EAAAC,cAACwL,EAAA,KAAD,CAAMgB,MAAM,SAASrL,IAAKiN,EAAYhB,GAAItB,UAAWA,GACnDtE,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,CAAK6D,KAAM,GACT7H,EAAAzH,EAAAC,cAACsP,GAAA,EAAD,CAAiBC,SAAO,EAACnB,YAAaA,KAExC5G,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,KAC0B,aAAvB4C,EAAY/C,QACX7D,EAAAzH,EAAAC,cAACwP,EAAA,EAAD,CACErQ,KAAK,SACLqJ,SAAS,UACT5G,SAAUA,EACVwM,YAAaA,EACb/I,iBAAkB4E,EAAKkE,qBACvB7I,WAAW,IAGS,WAAvB8I,EAAY/C,QACX7D,EAAAzH,EAAAC,cAACqJ,GAAA,QAAD,CACEvD,SAAUmE,EAAKwF,mBACfC,eAAgB,CAACC,UAAW,QAC5B3J,MAAM,gCAENwB,EAAAzH,EAAAC,cAACmK,GAAD,CACEC,YAAU,EACVL,KAAK,gBACLjE,UAAWmE,EAAKwF,qBAAuB9D,EACvCV,GAAE,aAAApM,OAAe0L,EAAf,kBAAA1L,OAAqC+C,EAAST,IAA9C,KAAAtC,OAAqDuP,EAAYhB,GAAjE,MAJJ,eAWN5F,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,KACEhE,EAAAzH,EAAAC,cAACyH,GAAA,QAADC,IAAA,CAASc,SAAS,SAAS1C,UAAW6F,GAAeuD,GACnD1H,EAAAzH,EAAAC,cAACmK,GAAD,CAAcrE,UAAW6F,EAAWvB,YAAU,EAACL,KAAK,cAApD,0DAnFW,IAAAO,EAAA5K,KAChB0O,EAAe1O,KAAKF,MAApB4O,YADgBwB,EAEIlQ,KAAKmQ,sBAAsBzB,EAAYxM,SAASiN,SAApEE,EAFgBa,EAEhBb,KAAMC,EAFUY,EAEVZ,WAUb,MAAO,CACL9L,QARAsE,EAAAzH,EAAAC,cAACwH,EAAAzH,EAAM6H,SAAP,KACEJ,EAAAzH,EAAAC,cAAC6H,GAAA,QAAD,CAAOC,KAAK,QAAQiC,KAAK,2BAAzB,+CAGCgF,GAKHzG,YAAa0G,EACb3G,UAAW,kBAAMiC,EAAK9K,MAAMsQ,SAAS1B,iDAIf,IAAA2B,EAAArQ,KACjB0O,EAAe1O,KAAKF,MAApB4O,YADiB4B,EAEG5B,EAAYxM,SAASiN,QAAQoB,eAAjDlB,EAFiBiB,EAEjBjB,KAAMC,EAFWgB,EAEXhB,WAUb,MAAO,CACL9L,QATAsE,EAAAzH,EAAAC,cAACwH,EAAAzH,EAAM6H,SAAP,KACEJ,EAAAzH,EAAAC,cAAC6H,GAAA,QAAD,CAAOC,KAAK,QAAQiC,KAAK,2BAAzB,gDAGCgF,GAMHzG,YAAa0G,EACb3G,UAAW,kBAAM0H,EAAKvQ,MAAM0Q,UAAU9B,YAnFMnO,IAAMC,WAAnCgO,GACZ/N,UAAY,CACjBoK,MAAOnK,IAAUI,OAAOF,WACxBsB,SAAUxB,IAAUyE,OAAOvE,WAC3B8N,YAAahO,IAAUyE,OAAOvE,WAC9BwP,SAAU1P,IAAUwE,KAAKtE,WACzB4P,UAAW9P,IAAUwE,KAAKtE,WAC1BiO,uBAAwBnO,IAAUwE,KAAKtE,YAyI3C,IAAM6J,GAAe9K,kBAAOgN,UAAV,CAAA/M,OAAA,YAAGD,CAAH,SACP,SAAAV,GAAC,OAAIA,EAAEI,MAAMoN,OADN,mDC9IGgE,sLA0CnBC,UAAY,WACV,IAAMC,EAAe1O,EAAK2O,QAAQD,aAC5BzO,EAAWD,EAAKnC,MAAMoC,SACtByD,EAAmB1D,EAAKnC,MAAMiE,UACpC8M,YAAuB,CAAC3O,WAAUyO,eAAchL,0FAgB7B,IAAA4E,EAAAvK,KACnB,OAAOA,KAAK8Q,aAAaxD,IAAI,SAAAoB,GAAW,OACtC5G,EAAAzH,EAAAC,cAACyQ,GAAD,CACEtP,IAAKiN,EAAYhB,GACjB7C,MAAON,EAAKzK,MAAM+K,MAClB3I,SAAUqI,EAAKzK,MAAMoC,SACrBwM,YAAaA,EACb0B,SAAU7F,EAAKzK,MAAMsQ,SACrBI,UAAWjG,EAAKzK,MAAM0Q,UACtB3B,uBAAwBtE,EAAKzK,MAAMkR,iDAMvC,OACElJ,EAAAzH,EAAAC,cAAC2Q,EAAA,EAAD,CAAWhS,EAAG,EAAGiS,UAAU,UACzBpJ,EAAAzH,EAAAC,cAACwL,EAAA,KAAD,CAAMgB,MAAM,SAAS7N,EAAG,GACtB6I,EAAAzH,EAAAC,cAAC6Q,GAAA,EAAD,CAAY1R,KAAM,GAAI2R,SAAUpR,KAAKF,MAAMoC,SAAST,MACpDqG,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,CAAKuF,GAAI,EAAG1B,KAAM,GAChB7H,EAAAzH,EAAAC,cAACgR,GAAD,KAAetR,KAAKF,MAAMoC,SAASiC,MACnC2D,EAAAzH,EAAAC,cAACiR,GAAD,KACEzJ,EAAAzH,EAAAC,cAACsL,GAAD,CAAQxM,QAASY,KAAKwR,YACtB1J,EAAAzH,EAAAC,cAACuL,GAAD,CAAYrF,QAASxG,KAAK0Q,WAA1B,gBAGJ5I,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,KACEhE,EAAAzH,EAAAC,cAAC8J,EAAA,QAADpC,IAAA,CAAQvI,KAAK,QAAQ+G,QAASxG,KAAK0Q,WAAe1Q,KAAK6F,gBAG1D7F,KAAKyR,2DAnEV,OAAOzR,KAAKF,MAAMoC,SAAS4O,+CAI3B,OAAO9Q,KAAK8Q,aAAaxL,OAAS,0CAIlC,OAAOtF,KAAKF,MAAM4R,eAAexC,SAASlP,KAAKF,MAAMoC,SAAST,0CAI9D,OAAOgP,EAAYkB,uBAAuBzC,SAASlP,KAAKF,MAAMoC,SAAST,yCAevE,IAAMmQ,GAAe5R,KAAKwR,WAAaxR,KAAK6R,iBAAmB7R,KAAK8R,aAEpE,MAAO,CACLzH,KAAMuH,EAAc,eAAiB,kBACrC3M,SAAUjF,KAAKwR,UACXtN,YAAE,eACF0N,EAAc1N,YAAE,UAAYA,YAAE,mBA1DC3D,IAAMC,WAA1BiQ,GACZsB,aAAe,CACpBpB,aAAc/G,WAAYoI,cAFTvB,GAKZhQ,UAAY,CAEjByB,SAAUxB,IAAUyE,OAAOvE,WAC3BiK,MAAOnK,IAAUI,OAAOF,WACxBmD,UAAWrD,IAAUwE,KAAKtE,WAC1BwP,SAAU1P,IAAUwE,KAAKtE,WACzB4P,UAAW9P,IAAUwE,KAAKtE,WAC1BoQ,YAAatQ,IAAUwE,KAAKtE,WAC5B8Q,eAAgBhR,IAAU0E,OAbTqL,GAgBZ1P,aAAe,CACpB2Q,eAAgB,IAjBCjB,GAoBZkB,uBAAyB,CAAC,OAAQ,YAAa,SAAU,qBA8ElE,IAAML,GAAe3R,kBAAO,MAAV,CAAAC,OAAA,aAAGD,CAAH,qBAIZ4R,GAAkB5R,kBAAO2M,OAAV,CAAA1M,OAAA,aAAGD,CAAH,sDAMfiM,GAASjM,kBACbiN,oBAAU,SAAA9M,GAAS,IACVV,EAAiBU,EAAjBV,QAAYH,EADF4I,IACO/H,EADP,aAEjB,OACEgI,EAAAzH,EAAAC,cAACwL,EAAA,KAAD,CAAMgB,MAAM,UACVhF,EAAAzH,EAAAC,cAACyM,EAAA,EAAD,CAAiBtN,KAAM,EAAGP,MAAOE,EAAUH,EAAEI,MAAMC,QAAUL,EAAEI,MAAMoN,QACrE3E,EAAAzH,EAAAC,cAAA,MAASrB,EAAIG,EAAU8E,YAAE,aAAeA,YAAE,qBANtC,CAAAtE,OAAA,aAAGD,CAAH,SAWD,SAAAV,GAAC,OAAKA,EAAEG,QAAUH,EAAEI,MAAMC,QAAUL,EAAEI,MAAMoN,OAX3C,gBAYKO,mBAAM,IAZX,8BAeC,SAAA/N,GAAC,OAAIA,EAAEI,MAAM4N,OAfd,gBAgBOD,mBAAM,KAhBb,qCAmBMA,mBAAM,KAnBZ,KAsBNiF,GAAkBtS,kBAAO,MAAV,CAAAC,OAAA,aAAGD,CAAH,qDAGNuS,aAAS,QAHH,qCAIf,SAAAjT,GAAC,OAAIkT,aAAUlT,EAAEI,MAAM+S,iBAJR,uCAOfrB,GAA6BpR,kBACjC,SAAAV,GAAC,OACCA,EAAEyP,YAAY2D,WACZvK,EAAAzH,EAAAC,cAAC2R,GAAD,KACEnK,EAAAzH,EAAAC,cAACgS,GAAyBrT,IAG5B6I,EAAAzH,EAAAC,cAACgS,GAAyBrT,IAPA,CAAAW,OAAA,aAAGD,CAAH,WAUnBqN,mBAAM,GAVa,0DAaL,SAAA/N,GAAC,OAAIA,EAAEI,MAAMkT,aAbR,KAgB1B1G,GAAalM,kBAAO6M,KAAV,CAAA5M,OAAA,aAAGD,CAAH,SACL,SAAAV,GAAC,OAAIA,EAAEI,MAAMoN,OADR,gDC7JV+F,eAQJ,SAAAA,EAAY1S,GAAO,IAAAmC,EAAA,OAAA4E,IAAA7G,KAAAwS,IACjBvQ,EAAAkF,IAAAnH,KAAAoH,IAAAoL,GAAArS,KAAAH,KAAMF,KAOR2S,aAAe,SAAA3O,GAAQ,IACdwG,EAAgBxG,EAAhBwG,QAASN,EAAOlG,EAAPkG,IACTc,EAAY7I,EAAK2F,MAAjBkD,SACAD,EAAS5I,EAAKnC,MAAd+K,MAEP,GAAKb,EAAI0I,YAGF,CACL,IAAMC,EAAc,CAClBC,eAAgBtI,EAAQZ,KACxBmJ,KAAMvI,EAAQuI,KACdC,QAASjI,GAEL6H,EAAcK,aAA4B/I,EAAI0I,YAAaC,GACjEvP,OAAOO,SAASiL,OAAO8D,QATvBM,4BAAkB9O,YAAC,GAAA/E,OAAI6K,EAAIC,KAAR,8BACnBhI,EAAKyF,SAAS,CAACoD,SAAQ,CAAGR,GAAHnL,OAAA8T,IAAenI,OAfvB7I,EA2BnBqI,QAAU,SAAAN,GAAO,IAAAvE,EACMxD,EAAKnC,MAAnB+K,EADQpF,EACRoF,OCnCJ,SAA0BqI,EAAQrI,EAAOb,GAC9CmJ,8BACA,IAAMC,EAAUF,EAAOG,eAAP,kBAAAlU,OACI0L,EADJ,8BAEd,CACEyI,OAAQ,OACRxP,KAAM,CAACmG,KAAMD,EAAIC,QAOrB,OAJAmJ,EAAQG,KACN,kBAAMC,6BACN,kBAAMC,0BAAgBvP,YAAC,qBAAA/E,OAAsB6K,EAAI7F,UAE5CiP,GDuBLM,CAFejO,EACDkO,IACQ9I,EAAOb,GAAKuJ,KAChC,SAAAzP,GACE7B,EAAKwQ,aAAa,CAACnI,QAASsJ,IAAA,GAAI9P,GAAOkG,IAAK4J,IAAA,GAAI5J,MAElD,eAjCe/H,EAqCnB4R,UAAY,SAAAvJ,GAAW,IACdqJ,EAAO1R,EAAKnC,MAAZ6T,IACDG,EAAeb,IAAIhR,EAAK2F,MAAMkD,UAC9BA,EAAW7I,EAAK2F,MAAMkD,SAASkE,OAAO,SAAA+E,GAAC,OAAIzJ,EAAQZ,MAAQqK,EAAErK,QCzBhE,SAA4BwJ,EAAQ5I,GACzC6I,8BACA,IAAMC,EAAUF,EAAOG,eAAP,6BAAAlU,OAAmDmL,EAAQZ,KAA3D,KAAoE,CAClF4J,OAAQ,WAQV,OANAF,EAAQG,KACN,WACEP,4BAAkB9O,YAAC,GAAA/E,OAAImL,EAAQN,IAAIC,KAAhB,iCAErB,kBAAMuJ,8BAEDJ,GDgBLY,CAAmBL,EAAKrJ,GAASiJ,KAC/B,kBAAMtR,EAAKyF,SAAS,CAACoD,cACrB,WACE7I,EAAKyF,SAAS,CAACoM,iBACfL,0BAAgBvP,YAAC,uBAAA/E,OAAwBmL,EAAQN,IAAI7F,WA9CxClC,EAmDnByO,UAAY,SAAA1G,GAAO,IACVa,EAAS5I,EAAKnC,MAAd+K,MAEPoJ,YAA6B,CAACjK,MAAKa,QAAO9G,UADxB,kBAAM9B,EAAKqI,QAAQN,OAnDrC/H,EAAK2F,MAAQ,CACXkD,SAAU7I,EAAKnC,MAAMgL,SACrBoJ,aAAcjS,EAAKnC,MAAMoU,cAJVjS,wDA6DV,IAAAsI,EAAAvK,KACA6K,EAAS7K,KAAKF,MAAd+K,MACDsJ,EAA6C,IAAnCnU,KAAK4H,MAAMsM,aAAa5O,OAExC,OACEwC,EAAAzH,EAAAC,cAACwH,EAAAzH,EAAM6H,SAAP,MACIiM,GACAnU,KAAK4H,MAAMsM,aAAa5G,IAAI,SAAAtD,GAC1B,OACElC,EAAAzH,EAAAC,cAAC8T,GAAA,EAAD,CACE3S,IAAKuI,EAAIN,KACTM,IAAKA,EACLa,MAAOA,EACP9G,UAAW,kBAAMwG,EAAKmG,UAAU1G,IAChCQ,YAAaD,EAAKsJ,UAClB/I,SAAUP,EAAK8J,cAAcrK,EAAIC,iDAlB7C,OAAOiE,IAAQlO,KAAK4H,MAAMkD,SAAU,SAAAR,GAAO,OAAIA,EAAQN,IAAIC,cAlE1B1J,IAAMC,WAArCgS,GACG/R,UAAY,CACjBkT,IAAKjT,IAAUyE,OACf0F,MAAOnK,IAAUI,OAAOF,WACxBkK,SAAUpK,IAAU0E,MAAMxE,WAC1BsT,aAAcxT,IAAU0E,MAAMxE,YAwFnB0T,0BAAQ9B,yEExFjB+B,sLAGJC,cAAe,IACfC,iBAAkB,IAClBC,uBAAwB,IA0DxB3Q,UAAY,SAAA2K,GAGV,IAAMiG,EAAaC,IAAM3S,EAAK2F,MAAMkJ,aAAc,SAAAiD,GAAC,OAAIA,EAAErG,KAIpDiH,EAAWxT,eAAeuN,EAAYhB,MACzCgB,EAAY2D,YAAa,GAG3B,IAAMvB,EAAe+D,oBACnBzT,OAAO0T,OAAPlB,IAAA,GAAkBe,EAAlBI,IAAA,GAA+BrG,EAAYhB,GAAKgB,KAChD,SAAAqF,GAAC,OAAIA,EAAE5P,OAETlC,EAAKyF,SAAS,CAACoJ,oBAGjBV,SAAW,SAAA1B,GAAe,IACjB7D,EAAS5I,EAAKnC,MAAMkV,OAApBnK,MAEDoK,EAAmBhC,IAAIhR,EAAK2F,MAAMkJ,cAElCA,EAAe7O,EAAK2F,MAAMkJ,aAAa9B,OAAO,SAAA+E,GAAC,OAAIA,EAAErG,KAAOgB,EAAYhB,KAC9EzL,EAAKyF,SAAS,CAACoJ,iBAEf,IAAMoE,EAAU,CACd5B,OAAQ,SACR/T,MAAO,WACL0C,EAAKyF,SAAS,CAACoJ,aAAcmE,IAC7BxB,0BAAgBvP,YAAE,mCAItBjC,EAAK0R,IAAIwB,QAAT,kBAAAhW,OAAmC0L,EAAnC,kBAAA1L,OAAyDuP,EAAYhB,GAArE,KAA4EwH,MAG9E1E,UAAY,SAAA9B,GACV,IAAItM,EADqBgT,EAEK1G,EAAY2G,WAAWhH,MAAM,KAFlCiH,EAAA/H,IAAA6H,EAAA,GAElBC,EAFkBC,EAAA,GAEN9H,EAFM8H,EAAA,GAKvBlT,EAD8B,SAA5BsM,EAAY6G,YACX,WAAApW,OAAckW,EAAd,4BAEA,WAAAlW,OAAckW,EAAd,mBAAAlW,OAA0CqO,EAA1C,4BAGLpK,OAAOC,KAAKjB,EAAK,8EAtGjBoT,YAAU,4BAA6B,CACrCC,OAAQC,SAAS1V,KAAKF,MAAM6Q,aAAajD,GAAI,6CAIlC,IACN7C,EAAS7K,KAAKF,MAAMkV,OAApBnK,MAED8K,EAAY,CAChB,CAAC,SAAD,kBAAAxW,OAA6B0L,EAA7B,0BACA,CAAC,eAAD,kBAAA1L,OAAmC0L,EAAnC,mBACA,CAAC,UAAD,kBAAA1L,OAA8B0L,EAA9B,aAAgD,CAAClI,MAJrC,CAACiT,QAAS,CAAC,OAAQ,SAAU,iBAM3C,OAAK5V,KAAKF,MAAM6Q,aAAa5B,SAASG,SAAS,eAG/C,GAAA/P,OACKwW,EADL,CAEE,CAAC,eAAD,kBAAAxW,OAAmC0L,EAAnC,kBACA,CAAC,cAAD,kBAAA1L,OAAkC0L,EAAlC,iCALO8K,uCA6FE,IAAApL,EAAAvK,KAAA6V,EACoC7V,KAAK4H,MAA7CkO,EADID,EACJC,UAAW5B,EADP2B,EACO3B,aAAc6B,EADrBF,EACqBE,YAC1BpI,EAAY3N,KAAK2N,UACpBqI,KAAK,SAAC3V,EAAG4V,GAAJ,OAAUA,EAAEjL,YAAc3K,EAAE2K,cACjCsC,IAAI,SAAApL,GAAQ,OACX4F,EAAAzH,EAAAC,cAAC4V,GAAD,CACEzU,IAAKS,EAAST,IACdS,SAAUA,EACV2I,MAAON,EAAKzK,MAAMkV,OAAOnK,MACzBiG,aAAc5O,EAAS4O,aACvB/M,UAAWwG,EAAKxG,UAChBqM,SAAU7F,EAAK6F,SACfI,UAAWjG,EAAKiG,UAChBQ,YAAazG,EAAKxG,UAClB2N,eAAgBnH,EAAKmH,mBAI3B,OACE5J,EAAAzH,EAAAC,cAACwH,EAAAzH,EAAM6H,SAAP,MACIlI,KAAKF,MAAMqW,YAAcrO,EAAAzH,EAAAC,cAAC8V,GAAA,QAAD,CAAoB9P,MAAOpC,YAAE,kBACxD4D,EAAAzH,EAAAC,cAAC+V,EAAA,EAAD,CAAiBtK,OAAQ,CAAC,sBAE1BjE,EAAAzH,EAAAC,cAACgW,EAAD,CACEzL,MAAO7K,KAAKF,MAAMkV,OAAOnK,MACzB8C,UAAW3N,KAAK2N,UAChB5J,UAAW/D,KAAK+D,YAGlB+D,EAAAzH,EAAAC,cAAC2Q,EAAA,EAAD,KACEnJ,EAAAzH,EAAAC,cAAC2Q,EAAA,EAAD,CAAasF,gBAAc,GACzBzO,EAAAzH,EAAAC,cAACwL,EAAA,IAAD,CAAKuF,GAAI,EAAG1B,KAAK,KACdzL,YAAE,iBAEJ4R,GAAahO,EAAAzH,EAAAC,cAACkW,GAAD,CAAwBC,MAAI,KAE5C3O,EAAAzH,EAAAC,cAAC2Q,EAAA,EAAD,KACGtD,EACAuG,GACCpM,EAAAzH,EAAAC,cAACoW,GAAD,CACE7L,MAAO7K,KAAKF,MAAMkV,OAAOnK,MACzBC,SAAUiL,EACV7B,aAAcA,8CA1H1B,OAAOyC,IAAQ3W,KAAK4H,MAAMgO,QAAQtI,IAAI,SAAAsJ,GAAM,OAAIA,EAAOxX,SAAWwX,EAAO3M,uDAKzE,OAAOiE,IAAQlO,KAAK4H,MAAMuG,kBAAmB,SAAAC,GAAI,OAAIA,EAAKjK,KAAKkK,MAAM,KAAK,uCAG5D,IAAAzD,EAAA5K,KAId,OAAOA,KAAK4H,MAAMiP,OAAOlJ,UAAUL,IAAI,SAAApL,GACrC,IAAM4O,EAAelG,EAAKhD,MAAMkJ,aAAa9B,OAC3C,SAAA+E,GAAC,OAAIA,EAAE7R,SAAST,KAAOS,EAAST,MAE5BuJ,EAAc8F,EAAaxL,OAAS,EAE1C,OAAAsO,IAAA,GACK1R,EADL,CAEE4O,eACA9F,yBAxD+BsD,WAuKjCkI,GAAyB7W,kBAAOmX,UAAV,CAAAlX,OAAA,YAAGD,CAAH,oEAOboX,uBAAiBxC","file":"OrganizationIntegrations.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'react-emotion';\n\nconst getBackgroundColor = p => {\n  if (p.color) {\n    return `background: ${p.color};`;\n  }\n\n  return `background: ${p.enabled ? p.theme.success : p.theme.error};`;\n};\n\nconst getSize = p => `\n  height: ${p.size}px;\n  width: ${p.size}px;\n`;\n\nconst Circle = styled.div`\n  display: inline-block;\n  position: relative;\n  border-radius: 50%;\n  ${getSize};\n  ${getBackgroundColor};\n`;\n\nclass CircleIndicator extends React.Component {\n  static propTypes = {\n    enabled: PropTypes.bool.isRequired,\n    size: PropTypes.number.isRequired,\n    color: PropTypes.string,\n  };\n\n  static defaultProps = {\n    enabled: true,\n    size: 14,\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return <Circle {...this.props} />;\n  }\n}\n\nexport default CircleIndicator;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport queryString from 'query-string';\n\nimport {t} from 'app/locale';\nimport IndicatorStore from 'app/stores/indicatorStore';\n\nexport default class AddIntegration extends React.Component {\n  static propTypes = {\n    children: PropTypes.func.isRequired,\n    provider: PropTypes.object.isRequired,\n    onInstall: PropTypes.func.isRequired,\n    reinstallId: PropTypes.string,\n  };\n\n  componentDidMount() {\n    this.dialog = null;\n    window.addEventListener('message', this.didReceiveMessage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('message', this.didReceiveMessage);\n    this.dialog && this.dialog.close();\n  }\n\n  computeCenteredWindow(width, height) {\n    const screenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\n\n    const screenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\n    const innerWidth = window.innerWidth\n      ? window.innerWidth\n      : document.documentElement.clientWidth\n        ? document.documentElement.clientWidth\n        : screen.width;\n\n    const innerHeight = window.innerHeight\n      ? window.innerHeight\n      : document.documentElement.clientHeight\n        ? document.documentElement.clientHeight\n        : screen.height;\n\n    const left = innerWidth / 2 - width / 2 + screenLeft;\n    const top = innerHeight / 2 - height / 2 + screenTop;\n\n    return {left, top};\n  }\n\n  openDialog = urlParams => {\n    const name = 'sentryAddIntegration';\n    const {url, width, height} = this.props.provider.setupDialog;\n    const {left, top} = this.computeCenteredWindow(width, height);\n\n    const query = {...urlParams};\n\n    if (this.props.reinstallId) {\n      query.reinstall_id = this.props.reinstallId;\n    }\n\n    const installUrl = `${url}?${queryString.stringify(query)}`;\n    const opts = `scrollbars=yes,width=${width},height=${height},top=${top},left=${left}`;\n\n    this.dialog = window.open(installUrl, name, opts);\n    this.dialog.focus();\n  };\n\n  didReceiveMessage = message => {\n    if (message.origin !== document.location.origin) {\n      return;\n    }\n\n    if (message.source !== this.dialog) {\n      return;\n    }\n\n    const {success, data} = message.data;\n    this.dialog = null;\n\n    if (!success) {\n      IndicatorStore.addError(data.error);\n      return;\n    }\n\n    if (!data) {\n      return;\n    }\n\n    this.props.onInstall(data);\n    IndicatorStore.addSuccess(t(`${this.props.provider.name} added`));\n  };\n\n  render() {\n    return this.props.children(this.openDialog);\n  }\n}\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {t} from 'app/locale';\nimport AddIntegration from 'app/views/organizationIntegrations/addIntegration';\nimport Button from 'app/components/button';\nimport Tooltip from 'app/components/tooltip';\n\nexport default class AddIntegrationButton extends React.Component {\n  static propTypes = {\n    provider: PropTypes.object.isRequired,\n    onAddIntegration: PropTypes.func.isRequired,\n    buttonText: PropTypes.string,\n    reinstall: PropTypes.bool,\n  };\n\n  render() {\n    const {\n      provider,\n      buttonText,\n      onAddIntegration,\n      reinstall,\n      ...buttonProps\n    } = this.props;\n\n    const label =\n      buttonText || t(reinstall ? 'Enable' : 'Add %s', provider.metadata.noun);\n\n    return (\n      <Tooltip\n        disabled={provider.canAdd}\n        title={`Integration cannot be added on Sentry. Enable this integration via the ${provider.name} instance.`}\n      >\n        <AddIntegration provider={provider} onInstall={onAddIntegration}>\n          {onClick => (\n            <Button\n              disabled={!provider.canAdd}\n              {...buttonProps}\n              onClick={() => onClick()}\n            >\n              {label}\n            </Button>\n          )}\n        </AddIntegration>\n      </Tooltip>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Confirm from 'app/components/confirm';\nimport Alert from 'app/components/alert';\nimport Input from 'app/views/settings/components/forms/controls/input';\nimport Field from 'app/views/settings/components/forms/field';\nimport {t} from 'app/locale';\n\nclass ConfirmDelete extends React.PureComponent {\n  static propTypes = {\n    onConfirm: PropTypes.func.isRequired,\n    confirmText: PropTypes.string.isRequired,\n    confirmInput: PropTypes.string.isRequired,\n    cancelText: PropTypes.string.isRequired,\n    priority: PropTypes.oneOf(['primary', 'danger']).isRequired,\n    message: PropTypes.node,\n    /**\n     * Renderer that passes:\n     * `confirm`: Allows renderer to perform confirm action\n     * `close`: Allows renderer to toggle confirm modal\n     */\n    renderMessage: PropTypes.func,\n    disabled: PropTypes.bool,\n    onConfirming: PropTypes.func,\n    onCancel: PropTypes.func,\n  };\n\n  static defaultProps = {\n    priority: 'primary',\n    cancelText: t('Cancel'),\n    confirmText: t('Confirm'),\n  };\n\n  constructor(...args) {\n    super(...args);\n\n    this.state = {\n      disableConfirmButton: true,\n      confirmInput: '',\n    };\n  }\n\n  handleChange = evt => {\n    const input = evt.target.value;\n    if (input === this.props.confirmInput) {\n      this.setState({disableConfirmButton: false, confirmInput: input});\n    } else {\n      this.setState({disableConfirmButton: true, confirmInput: input});\n    }\n  };\n\n  render() {\n    const {confirmInput, message, ...props} = this.props;\n    const {disableConfirmButton} = this.state;\n\n    return (\n      <Confirm\n        {...props}\n        bypass={false}\n        disableConfirmButton={disableConfirmButton}\n        message={\n          <React.Fragment>\n            <Alert type=\"error\">{message}</Alert>\n            <Field\n              p={0}\n              flexibleControlStateSize={true}\n              inline={false}\n              label={\n                <div>\n                  Please enter <code>{confirmInput}</code> to confirm the deletion\n                </div>\n              }\n            >\n              <Input\n                type=\"text\"\n                placeholder={confirmInput}\n                onChange={this.handleChange}\n                value={this.state.confirmInput}\n              />\n            </Field>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default ConfirmDelete;\n","import React from 'react';\n\nimport BaseAvatar from 'app/components/avatar/baseAvatar';\nimport SentryTypes from 'app/sentryTypes';\n\nclass SentryAppAvatar extends React.Component {\n  static propTypes = {\n    sentryApp: SentryTypes.SentryApplication.isRequired,\n    ...BaseAvatar.propTypes,\n  };\n\n  render() {\n    const {sentryApp, ...props} = this.props;\n    if (!sentryApp) {\n      return null;\n    }\n\n    return (\n      <BaseAvatar\n        {...props}\n        type={'letter_avatar'}\n        uploadPath=\"avatar\"\n        uploadId={''}\n        letterId={sentryApp.uuid}\n        tooltip={sentryApp.name}\n        title={sentryApp.name}\n      />\n    );\n  }\n}\nexport default SentryAppAvatar;\n","import React from 'react';\nimport {Box, Flex} from 'grid-emotion';\nimport {Link} from 'react-router';\nimport Access from 'app/components/acl/access';\nimport Button from 'app/components/button';\nimport Confirm from 'app/components/confirm';\nimport ConfirmDelete from 'app/components/confirmDelete';\nimport SentryAppAvatar from 'app/components/avatar/sentryAppAvatar';\nimport PropTypes from 'prop-types';\nimport SentryTypes from 'app/sentryTypes';\nimport Tooltip from 'app/components/tooltip';\nimport {PanelItem} from 'app/components/panels';\nimport {t} from 'app/locale';\nimport styled from 'react-emotion';\nimport space from 'app/styles/space';\nimport {withTheme} from 'emotion-theming';\nimport CircleIndicator from 'app/components/circleIndicator';\n\nexport default class SentryApplicationRow extends React.PureComponent {\n  static propTypes = {\n    app: SentryTypes.SentryApplication,\n    orgId: PropTypes.string.isRequired,\n    installs: PropTypes.array,\n    onInstall: PropTypes.func,\n    onUninstall: PropTypes.func,\n    onRemoveApp: PropTypes.func,\n    showPublishStatus: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    showPublishStatus: false,\n  };\n\n  renderRemoveApp(app) {\n    const message = t(\n      `Deleting ${app.slug} will also delete any and all of its installations. \\\n       This is a permanent action. Do you wish to continue?`\n    );\n    return (\n      <ConfirmDelete\n        message={message}\n        confirmInput={app.slug}\n        priority=\"danger\"\n        onConfirm={() => this.props.onRemoveApp(app)}\n      >\n        <Button size=\"small\" icon=\"icon-trash\" />\n      </ConfirmDelete>\n    );\n  }\n\n  renderUninstall(install) {\n    const message = t(\n      `Are you sure you want to remove the ${install.app.slug} installation ?`\n    );\n    return (\n      <Confirm\n        message={message}\n        priority=\"danger\"\n        onConfirm={() => this.props.onUninstall(install)}\n      >\n        <StyledButton borderless icon=\"icon-trash\" data-test-id=\"sentry-app-uninstall\">\n          {t('Remove')}\n        </StyledButton>\n      </Confirm>\n    );\n  }\n\n  render() {\n    const {app, orgId, installs, showPublishStatus} = this.props;\n    const isInstalled = installs && installs.length > 0;\n\n    return (\n      <SentryAppItem>\n        <StyledFlex>\n          <SentryAppAvatar size={36} sentryApp={app} />\n          <SentryAppBox>\n            <SentryAppName>\n              {showPublishStatus ? (\n                <SentryAppLink to={`/settings/${orgId}/developer-settings/${app.slug}/`}>\n                  {app.name}\n                </SentryAppLink>\n              ) : (\n                app.name\n              )}\n            </SentryAppName>\n            <SentryAppDetails>\n              {showPublishStatus ? (\n                <PublishStatus published={app.status === 'published'} />\n              ) : (\n                <React.Fragment>\n                  <Status enabled={isInstalled} />\n                  <StyledLink onClick={() => {}}>{t('Learn More')}</StyledLink>\n                </React.Fragment>\n              )}\n            </SentryAppDetails>\n          </SentryAppBox>\n          {!showPublishStatus ? (\n            <Box>\n              {!isInstalled ? (\n                <Button\n                  onClick={() => this.props.onInstall(app)}\n                  size=\"small\"\n                  icon=\"icon-circle-add\"\n                  className=\"btn btn-default\"\n                >\n                  {t('Install')}\n                </Button>\n              ) : (\n                this.renderUninstall(installs[0])\n              )}\n            </Box>\n          ) : (\n            <Box>\n              {app.status === 'unpublished' ? (\n                <Access access={['org:admin']}>\n                  {({hasAccess}) => (\n                    <React.Fragment>\n                      {!hasAccess && (\n                        <Tooltip\n                          title={t('Owner permissions are required for this action.')}\n                        >\n                          <Button disabled size=\"small\" icon=\"icon-trash\" />\n                        </Tooltip>\n                      )}\n                      {hasAccess && this.renderRemoveApp(app)}\n                    </React.Fragment>\n                  )}\n                </Access>\n              ) : (\n                <Tooltip title={t('Published apps cannot be removed.')}>\n                  <Button disabled size=\"small\" icon=\"icon-trash\" />\n                </Tooltip>\n              )}\n            </Box>\n          )}\n        </StyledFlex>\n      </SentryAppItem>\n    );\n  }\n}\n\nconst SentryAppItem = styled(PanelItem)`\n  flex-direction: column;\n  padding: 5px;\n`;\n\nconst StyledFlex = styled(Flex)`\n  justify-content: center;\n  padding: 10px;\n`;\n\nconst SentryAppBox = styled(Box)`\n  padding-left: 15px;\n  padding-right: 15px;\n  flex: 1;\n`;\n\nconst SentryAppDetails = styled(Flex)`\n  align-items: center;\n  margin-top: 6px;\n  font-size: 0.8em;\n`;\n\nconst SentryAppName = styled('div')`\n  font-weight: bold;\n`;\n\nconst StyledLink = styled(Link)`\n  color: ${p => p.theme.gray2};\n`;\n\nconst SentryAppLink = styled(Link)`\n  color: ${props => props.theme.textColor};\n`;\n\nconst StyledButton = styled(Button)`\n  color: ${p => p.theme.gray2};\n`;\n\nconst Status = styled(\n  withTheme(({enabled, ...props}) => {\n    return (\n      <Flex align=\"center\">\n        <CircleIndicator\n          size={6}\n          color={enabled ? props.theme.success : props.theme.gray2}\n        />\n        <div {...props}>{enabled ? t('Installed') : t('Not Installed')}</div>\n      </Flex>\n    );\n  })\n)`\n  color: ${props => (props.enabled ? props.theme.success : props.theme.gray2)};\n  margin-left: ${space(0.5)};\n  font-weight: light;\n  &:after {\n    content: '|';\n    color: ${p => p.theme.gray1};\n    margin-left: ${space(0.75)};\n    font-weight: normal;\n  }\n  margin-right: ${space(0.75)};\n`;\n\nconst PublishStatus = styled(({published, ...props}) => {\n  return (\n    <Flex align=\"center\">\n      <div {...props}>{published ? t('published') : t('unpublished')}</div>\n    </Flex>\n  );\n})`\n  color: ${props => (props.published ? props.theme.success : props.theme.gray2)};\n  font-weight: light;\n  margin-right: ${space(0.75)};\n`;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport {groupBy} from 'lodash';\n\nimport {tct} from 'app/locale';\nimport AddIntegration from 'app/views/organizationIntegrations/addIntegration';\nimport AlertLink from 'app/components/alertLink';\nimport AsyncComponent from 'app/components/asyncComponent';\n\nexport default class MigrationWarnings extends AsyncComponent {\n  static propTypes = {\n    orgId: PropTypes.string.isRequired,\n    providers: PropTypes.array.isRequired,\n    onInstall: PropTypes.func.isRequired,\n  };\n\n  getEndpoints() {\n    const {orgId} = this.props;\n\n    return [['unmigratableRepos', `/organizations/${orgId}/repos/?status=unmigratable`]];\n  }\n\n  get unmigratableReposByOrg() {\n    // Group by [GitHub|BitBucket|VSTS] Org name\n    return groupBy(this.state.unmigratableRepos, repo => repo.name.split('/')[0]);\n  }\n\n  render() {\n    return Object.entries(this.unmigratableReposByOrg).map(([orgName, repos]) => {\n      // Repos use 'visualstudio', Integrations use 'vsts'. Normalize to 'vsts'.\n      const key = repos[0].provider.id == 'visualstudio' ? 'vsts' : repos[0].provider.id;\n      const provider = this.props.providers.find(p => p.key === key);\n\n      // The Org might not have access to this Integration yet.\n      if (!provider) {\n        return '';\n      }\n\n      return (\n        <AddIntegration\n          key={provider.key}\n          provider={provider}\n          onInstall={this.props.onInstall}\n        >\n          {onClick => (\n            <AlertLink onClick={() => onClick()} href=\"#\">\n              {tct(\n                \"Your [orgName] repositories can't send commit data to Sentry. Add a [orgName] [providerName] instance here.\",\n                {\n                  orgName,\n                  providerName: provider.name,\n                }\n              )}\n            </AlertLink>\n          )}\n        </AddIntegration>\n      );\n    });\n  }\n}\n","import {Box, Flex} from 'grid-emotion';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'react-emotion';\n\nimport {t} from 'app/locale';\nimport Access from 'app/components/acl/access';\nimport AddIntegrationButton from 'app/views/organizationIntegrations/addIntegrationButton';\nimport Alert from 'app/components/alert';\nimport Button from 'app/components/button';\nimport Confirm from 'app/components/confirm';\nimport IntegrationItem from 'app/views/organizationIntegrations/integrationItem';\nimport Tooltip from 'app/components/tooltip';\n\nconst CONFIGURABLE_FEATURES = ['commits', 'alert-rule'];\n\nexport default class InstalledIntegration extends React.Component {\n  static propTypes = {\n    orgId: PropTypes.string.isRequired,\n    provider: PropTypes.object.isRequired,\n    integration: PropTypes.object.isRequired,\n    onRemove: PropTypes.func.isRequired,\n    onDisable: PropTypes.func.isRequired,\n    onReinstallIntegration: PropTypes.func.isRequired,\n  };\n\n  /**\n   * Integrations have additional configuration when any of the conditions are\n   * met:\n   *\n   * - The Integration has organization-specific configuration options.\n   * - The Integration has configurable features\n   */\n  hasConfiguration() {\n    const {integration, provider} = this.props;\n\n    return (\n      integration.configOrganization.length > 0 ||\n      provider.features.filter(f => CONFIGURABLE_FEATURES.includes(f)).length > 0\n    );\n  }\n\n  reinstallIntegration = integration => {\n    const activeIntegration = Object.assign({}, this.props.integration, {\n      status: 'active',\n    });\n    this.props.onReinstallIntegration(activeIntegration);\n  };\n\n  getRemovalBodyAndText(aspects) {\n    if (aspects && aspects.removal_dialog) {\n      return {\n        body: aspects.removal_dialog.body,\n        actionText: aspects.removal_dialog.actionText,\n      };\n    } else {\n      return {\n        body: t(\n          'Deleting this integration will remove any project associated data. This action cannot be undone. Are you sure you want to delete this integration?'\n        ),\n        actionText: t('Delete'),\n      };\n    }\n  }\n\n  get removeConfirmProps() {\n    const {integration} = this.props;\n    const {body, actionText} = this.getRemovalBodyAndText(integration.provider.aspects);\n\n    const message = (\n      <React.Fragment>\n        <Alert type=\"error\" icon=\"icon-circle-exclamation\">\n          Deleting this integration has consequences!\n        </Alert>\n        {body}\n      </React.Fragment>\n    );\n    return {\n      message,\n      confirmText: actionText,\n      onConfirm: () => this.props.onRemove(integration),\n    };\n  }\n\n  get disableConfirmProps() {\n    const {integration} = this.props;\n    const {body, actionText} = integration.provider.aspects.disable_dialog;\n    const message = (\n      <React.Fragment>\n        <Alert type=\"error\" icon=\"icon-circle-exclamation\">\n          This integration cannot be removed on Sentry\n        </Alert>\n        {body}\n      </React.Fragment>\n    );\n\n    return {\n      message,\n      confirmText: actionText,\n      onConfirm: () => this.props.onDisable(integration),\n    };\n  }\n\n  render() {\n    const {className, integration, provider, orgId} = this.props;\n\n    const removeConfirmProps =\n      integration.status === 'active' && integration.provider.canDisable\n        ? this.disableConfirmProps\n        : this.removeConfirmProps;\n\n    return (\n      <Access access={['org:integrations']}>\n        {({hasAccess}) => (\n          <Flex align=\"center\" key={integration.id} className={className}>\n            <Box flex={1}>\n              <IntegrationItem compact integration={integration} />\n            </Box>\n            <Box>\n              {integration.status === 'disabled' && (\n                <AddIntegrationButton\n                  size=\"xsmall\"\n                  priority=\"success\"\n                  provider={provider}\n                  integration={integration}\n                  onAddIntegration={this.reinstallIntegration}\n                  reinstall={true}\n                />\n              )}\n              {integration.status === 'active' && (\n                <Tooltip\n                  disabled={this.hasConfiguration()}\n                  tooltipOptions={{placement: 'left'}}\n                  title=\"Integration not configurable\"\n                >\n                  <StyledButton\n                    borderless\n                    icon=\"icon-settings\"\n                    disabled={!this.hasConfiguration() || !hasAccess}\n                    to={`/settings/${orgId}/integrations/${provider.key}/${integration.id}/`}\n                  >\n                    Configure\n                  </StyledButton>\n                </Tooltip>\n              )}\n            </Box>\n            <Box>\n              <Confirm priority=\"danger\" disabled={!hasAccess} {...removeConfirmProps}>\n                <StyledButton disabled={!hasAccess} borderless icon=\"icon-trash\">\n                  Remove\n                </StyledButton>\n              </Confirm>\n            </Box>\n          </Flex>\n        )}\n      </Access>\n    );\n  }\n}\n\nconst StyledButton = styled(Button)`\n  color: ${p => p.theme.gray2};\n`;\n","import {Box, Flex} from 'grid-emotion';\nimport {withTheme} from 'emotion-theming';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'react-emotion';\n\nimport {openIntegrationDetails} from 'app/actionCreators/modal';\nimport {PanelItem} from 'app/components/panels';\nimport {t} from 'app/locale';\nimport Button from 'app/components/button';\nimport CircleIndicator from 'app/components/circleIndicator';\nimport InstalledIntegration from 'app/views/organizationIntegrations/installedIntegration';\nimport Link from 'app/components/link';\nimport PluginIcon from 'app/plugins/components/pluginIcon';\nimport SentryTypes from 'app/sentryTypes';\nimport space from 'app/styles/space';\nimport {growDown, highlight} from 'app/styles/animations';\n\nexport default class ProviderRow extends React.Component {\n  static contextTypes = {\n    organization: SentryTypes.Organization,\n  };\n\n  static propTypes = {\n    // `provider` is expected to have a list of installed `integrations`.\n    provider: PropTypes.object.isRequired,\n    orgId: PropTypes.string.isRequired,\n    onInstall: PropTypes.func.isRequired,\n    onRemove: PropTypes.func.isRequired,\n    onDisable: PropTypes.func.isRequired,\n    onReinstall: PropTypes.func.isRequired,\n    enabledPlugins: PropTypes.array,\n  };\n\n  static defaultProps = {\n    enabledPlugins: [],\n  };\n\n  static upgradableIntegrations = ['vsts', 'bitbucket', 'github', 'github_enterprise'];\n\n  // State\n\n  get integrations() {\n    return this.props.provider.integrations;\n  }\n\n  get isEnabled() {\n    return this.integrations.length > 0;\n  }\n\n  get isEnabledPlugin() {\n    return this.props.enabledPlugins.includes(this.props.provider.key);\n  }\n\n  get isUpgradable() {\n    return ProviderRow.upgradableIntegrations.includes(this.props.provider.key);\n  }\n\n  // Actions\n\n  openModal = () => {\n    const organization = this.context.organization;\n    const provider = this.props.provider;\n    const onAddIntegration = this.props.onInstall;\n    openIntegrationDetails({provider, organization, onAddIntegration});\n  };\n\n  // Rendering\n\n  get buttonProps() {\n    const upgradeable = !this.isEnabled && this.isEnabledPlugin && this.isUpgradable;\n\n    return {\n      icon: upgradeable ? 'icon-upgrade' : 'icon-circle-add',\n      children: this.isEnabled\n        ? t('Add Another')\n        : upgradeable ? t('Update') : t('Install'),\n    };\n  }\n\n  renderIntegrations() {\n    return this.integrations.map(integration => (\n      <StyledInstalledIntegration\n        key={integration.id}\n        orgId={this.props.orgId}\n        provider={this.props.provider}\n        integration={integration}\n        onRemove={this.props.onRemove}\n        onDisable={this.props.onDisable}\n        onReinstallIntegration={this.props.onReinstall}\n      />\n    ));\n  }\n\n  render() {\n    return (\n      <PanelItem p={0} direction=\"column\">\n        <Flex align=\"center\" p={2}>\n          <PluginIcon size={36} pluginId={this.props.provider.key} />\n          <Box px={2} flex={1}>\n            <ProviderName>{this.props.provider.name}</ProviderName>\n            <ProviderDetails>\n              <Status enabled={this.isEnabled} />\n              <StyledLink onClick={this.openModal}>Learn More</StyledLink>\n            </ProviderDetails>\n          </Box>\n          <Box>\n            <Button size=\"small\" onClick={this.openModal} {...this.buttonProps} />\n          </Box>\n        </Flex>\n        {this.renderIntegrations()}\n      </PanelItem>\n    );\n  }\n}\n\nconst ProviderName = styled('div')`\n  font-weight: bold;\n`;\n\nconst ProviderDetails = styled(Flex)`\n  align-items: center;\n  margin-top: 6px;\n  font-size: 0.8em;\n`;\n\nconst Status = styled(\n  withTheme(props => {\n    const {enabled, ...p} = props;\n    return (\n      <Flex align=\"center\">\n        <CircleIndicator size={6} color={enabled ? p.theme.success : p.theme.gray2} />\n        <div {...p}>{enabled ? t('Installed') : t('Not Installed')}</div>\n      </Flex>\n    );\n  })\n)`\n  color: ${p => (p.enabled ? p.theme.success : p.theme.gray2)};\n  margin-left: ${space(0.5)};\n  &:after {\n    content: '|';\n    color: ${p => p.theme.gray1};\n    margin-left: ${space(0.75)};\n    font-weight: normal;\n  }\n  margin-right: ${space(0.75)};\n`;\n\nconst NewInstallation = styled('div')`\n  overflow: hidden;\n  transform-origin: 0 auto;\n  animation: ${growDown('59px')} 160ms 500ms ease-in-out forwards,\n    ${p => highlight(p.theme.yellowLightest)} 1000ms 500ms ease-in-out forwards;\n`;\n\nconst StyledInstalledIntegration = styled(\n  p =>\n    p.integration.newlyAdded ? (\n      <NewInstallation>\n        <InstalledIntegration {...p} />\n      </NewInstallation>\n    ) : (\n      <InstalledIntegration {...p} />\n    )\n)`\n  padding: ${space(2)};\n  padding-left: 0;\n  margin-left: 68px;\n  border-top: 1px dashed ${p => p.theme.borderLight};\n`;\n\nconst StyledLink = styled(Link)`\n  color: ${p => p.theme.gray2};\n`;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport {groupBy} from 'lodash';\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport SentryApplicationRow from 'app/views/settings/organizationDeveloperSettings/sentryApplicationRow';\nimport {t} from 'app/locale';\nimport {\n  installSentryApp,\n  uninstallSentryApp,\n} from 'app/actionCreators/sentryAppInstallations';\nimport {addQueryParamsToExistingUrl} from 'app/utils/queryString';\nimport {openSentryAppPermissionModal} from 'app/actionCreators/modal';\nimport withApi from 'app/utils/withApi';\n\nclass SentryAppInstallations extends React.Component {\n  static propTypes = {\n    api: PropTypes.object,\n    orgId: PropTypes.string.isRequired,\n    installs: PropTypes.array.isRequired,\n    applications: PropTypes.array.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      installs: this.props.installs,\n      applications: this.props.applications,\n    };\n  }\n\n  redirectUser = data => {\n    const {install, app} = data;\n    const {installs} = this.state;\n    const {orgId} = this.props;\n\n    if (!app.redirectUrl) {\n      addSuccessMessage(t(`${app.slug} successfully installed.`));\n      this.setState({installs: [install, ...installs]});\n    } else {\n      const queryParams = {\n        installationId: install.uuid,\n        code: install.code,\n        orgSlug: orgId,\n      };\n      const redirectUrl = addQueryParamsToExistingUrl(app.redirectUrl, queryParams);\n      window.location.assign(redirectUrl);\n    }\n  };\n\n  install = app => {\n    const {orgId, api} = this.props;\n    installSentryApp(api, orgId, app).then(\n      data => {\n        this.redirectUser({install: {...data}, app: {...app}});\n      },\n      () => {}\n    );\n  };\n\n  uninstall = install => {\n    const {api} = this.props;\n    const origInstalls = [...this.state.installs];\n    const installs = this.state.installs.filter(i => install.uuid != i.uuid);\n\n    uninstallSentryApp(api, install).then(\n      () => this.setState({installs}),\n      () => {\n        this.setState({origInstalls});\n        addErrorMessage(t(`Unable to uninstall ${install.app.name}`));\n      }\n    );\n  };\n\n  openModal = app => {\n    const {orgId} = this.props;\n    const onInstall = () => this.install(app);\n    openSentryAppPermissionModal({app, orgId, onInstall});\n  };\n\n  get installsByApp() {\n    return groupBy(this.state.installs, install => install.app.slug);\n  }\n\n  render() {\n    const {orgId} = this.props;\n    const isEmpty = this.state.applications.length === 0;\n\n    return (\n      <React.Fragment>\n        {!isEmpty &&\n          this.state.applications.map(app => {\n            return (\n              <SentryApplicationRow\n                key={app.uuid}\n                app={app}\n                orgId={orgId}\n                onInstall={() => this.openModal(app)}\n                onUninstall={this.uninstall}\n                installs={this.installsByApp[app.slug]}\n              />\n            );\n          })}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withApi(SentryAppInstallations);\nexport {SentryAppInstallations};\n","import {\n  addErrorMessage,\n  addLoadingMessage,\n  addSuccessMessage,\n  clearIndicators,\n} from 'app/actionCreators/indicator';\nimport {t} from 'app/locale';\n\n/**\n * Install a sentry application\n *\n * @param {Object} client ApiClient\n * @param {String} orgId Organization Slug\n * @param {Object} app SentryApp\n */\nexport function installSentryApp(client, orgId, app) {\n  addLoadingMessage();\n  const promise = client.requestPromise(\n    `/organizations/${orgId}/sentry-app-installations/`,\n    {\n      method: 'POST',\n      data: {slug: app.slug},\n    }\n  );\n  promise.then(\n    () => clearIndicators(),\n    () => addErrorMessage(t(`Unable to install ${app.name}`))\n  );\n  return promise;\n}\n\n/**\n * Uninstall a sentry application\n *\n * @param {Object} client ApiClient\n * @param {Object} install SentryAppInstallation\n */\nexport function uninstallSentryApp(client, install) {\n  addLoadingMessage();\n  const promise = client.requestPromise(`/sentry-app-installations/${install.uuid}/`, {\n    method: 'DELETE',\n  });\n  promise.then(\n    () => {\n      addSuccessMessage(t(`${install.app.slug} successfully uninstalled.`));\n    },\n    () => clearIndicators()\n  );\n  return promise;\n}\n","import {Box} from 'grid-emotion';\nimport {compact, groupBy, keyBy} from 'lodash';\nimport React from 'react';\nimport styled from 'react-emotion';\n\nimport {Panel, PanelBody, PanelHeader} from 'app/components/panels';\nimport {addErrorMessage} from 'app/actionCreators/indicator';\nimport {analytics} from 'app/utils/analytics';\nimport {sortArray} from 'app/utils';\nimport {t} from 'app/locale';\nimport AsyncComponent from 'app/components/asyncComponent';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport MigrationWarnings from 'app/views/organizationIntegrations/migrationWarnings';\nimport PermissionAlert from 'app/views/settings/organization/permissionAlert';\nimport ProviderRow from 'app/views/organizationIntegrations/providerRow';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\nimport SentryAppInstallations from 'app/views/organizationIntegrations/sentryAppInstallations';\nimport withOrganization from 'app/utils/withOrganization';\n\nclass OrganizationIntegrations extends AsyncComponent {\n  // Some integrations require visiting a different website to add them. When\n  // we come back to the tab we want to show our integrations as soon as we can.\n  shouldReload = true;\n  reloadOnVisible = true;\n  shouldReloadOnVisible = true;\n\n  componentDidMount() {\n    analytics('integrations.index_viewed', {\n      org_id: parseInt(this.props.organization.id, 10),\n    });\n  }\n\n  getEndpoints() {\n    const {orgId} = this.props.params;\n    const query = {plugins: ['vsts', 'github', 'bitbucket']};\n    const endpoints = [\n      ['config', `/organizations/${orgId}/config/integrations/`],\n      ['integrations', `/organizations/${orgId}/integrations/`],\n      ['plugins', `/organizations/${orgId}/plugins/`, {query}],\n    ];\n    if (!this.props.organization.features.includes('sentry-apps')) {\n      return endpoints;\n    }\n    return [\n      ...endpoints,\n      ['applications', `/organizations/${orgId}/sentry-apps/`],\n      ['appInstalls', `/organizations/${orgId}/sentry-app-installations/`],\n    ];\n  }\n\n  // State\n\n  get enabledPlugins() {\n    // List of slugs for each Plugin the Org/Project has currently enabled.\n    return compact(this.state.plugins.map(plugin => plugin.enabled && plugin.slug));\n  }\n\n  get unmigratableReposByOrg() {\n    // Group by [GitHub|BitBucket|VSTS] Org name\n    return groupBy(this.state.unmigratableRepos, repo => repo.name.split('/')[0]);\n  }\n\n  get providers() {\n    // Adds a list of `integrations` (installed Integration records)\n    // for each Provider, as well as an `isInstalled` boolean denoting\n    // when at least one Integration is present.\n    return this.state.config.providers.map(provider => {\n      const integrations = this.state.integrations.filter(\n        i => i.provider.key == provider.key\n      );\n      const isInstalled = integrations.length > 0;\n\n      return {\n        ...provider,\n        integrations,\n        isInstalled,\n      };\n    });\n  }\n\n  // Actions\n\n  onInstall = integration => {\n    // Merge the new integration into the list. If we're updating an\n    // integration overwrite the old integration.\n    const keyedItems = keyBy(this.state.integrations, i => i.id);\n\n    // Mark this integration as newlyAdded if it didn't already exist, allowing\n    // us to animate the element in.\n    if (!keyedItems.hasOwnProperty(integration.id)) {\n      integration.newlyAdded = true;\n    }\n\n    const integrations = sortArray(\n      Object.values({...keyedItems, [integration.id]: integration}),\n      i => i.name\n    );\n    this.setState({integrations});\n  };\n\n  onRemove = integration => {\n    const {orgId} = this.props.params;\n\n    const origIntegrations = [...this.state.integrations];\n\n    const integrations = this.state.integrations.filter(i => i.id !== integration.id);\n    this.setState({integrations});\n\n    const options = {\n      method: 'DELETE',\n      error: () => {\n        this.setState({integrations: origIntegrations});\n        addErrorMessage(t('Failed to remove Integration'));\n      },\n    };\n\n    this.api.request(`/organizations/${orgId}/integrations/${integration.id}/`, options);\n  };\n\n  onDisable = integration => {\n    let url;\n    const [domainName, orgName] = integration.domainName.split('/');\n\n    if (integration.accountType === 'User') {\n      url = `https://${domainName}/settings/installations/`;\n    } else {\n      url = `https://${domainName}/organizations/${orgName}/settings/installations/`;\n    }\n\n    window.open(url, '_blank');\n  };\n\n  // Rendering\n\n  renderBody() {\n    const {reloading, applications, appInstalls} = this.state;\n    const providers = this.providers\n      .sort((a, b) => b.isInstalled - a.isInstalled)\n      .map(provider => (\n        <ProviderRow\n          key={provider.key}\n          provider={provider}\n          orgId={this.props.params.orgId}\n          integrations={provider.integrations}\n          onInstall={this.onInstall}\n          onRemove={this.onRemove}\n          onDisable={this.onDisable}\n          onReinstall={this.onInstall}\n          enabledPlugins={this.enabledPlugins}\n        />\n      ));\n\n    return (\n      <React.Fragment>\n        {!this.props.hideHeader && <SettingsPageHeader title={t('Integrations')} />}\n        <PermissionAlert access={['org:integrations']} />\n\n        <MigrationWarnings\n          orgId={this.props.params.orgId}\n          providers={this.providers}\n          onInstall={this.onInstall}\n        />\n\n        <Panel>\n          <PanelHeader disablePadding>\n            <Box px={2} flex=\"1\">\n              {t('Integrations')}\n            </Box>\n            {reloading && <StyledLoadingIndicator mini />}\n          </PanelHeader>\n          <PanelBody>\n            {providers}\n            {applications && (\n              <SentryAppInstallations\n                orgId={this.props.params.orgId}\n                installs={appInstalls}\n                applications={applications}\n              />\n            )}\n          </PanelBody>\n        </Panel>\n      </React.Fragment>\n    );\n  }\n}\n\nconst StyledLoadingIndicator = styled(LoadingIndicator)`\n  position: absolute;\n  right: 7px;\n  top: 50%;\n  transform: translateY(-16px);\n`;\n\nexport default withOrganization(OrganizationIntegrations);\nexport {OrganizationIntegrations};\n"],"sourceRoot":""}